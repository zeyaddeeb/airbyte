"use strict";(self.webpackChunkdocu=self.webpackChunkdocu||[]).push([[8695],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>d});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),p=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=p(e.components);return a.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),h=p(n),d=r,u=h["".concat(c,".").concat(d)]||h[d]||m[d]||o;return n?a.createElement(u,i(i({ref:t},l),{},{components:n})):a.createElement(u,i({ref:t},l))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},34415:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var a=n(87462),r=(n(67294),n(3905));const o={},i="Basic Concepts",s={unversionedId:"connector-development/cdk-python/basic-concepts",id:"connector-development/cdk-python/basic-concepts",title:"Basic Concepts",description:"The Airbyte Specification",source:"@site/../docs/08-connector-development/07-cdk-python/01-basic-concepts.md",sourceDirName:"08-connector-development/07-cdk-python",slug:"/connector-development/cdk-python/basic-concepts",permalink:"/connector-development/cdk-python/basic-concepts",draft:!1,editUrl:"https://github.com/airbytehq/airbyte/blob/master/docs/../docs/08-connector-development/07-cdk-python/01-basic-concepts.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Connector Development Kit (Python)",permalink:"/connector-development/cdk-python/"},next:{title:"Defining Stream Schemas",permalink:"/connector-development/cdk-python/schemas"}},c={},p=[{value:"The Airbyte Specification",id:"the-airbyte-specification",level:2},{value:"The <code>Source</code> class",id:"the-source-class",level:2},{value:"The <code>AbstractSource</code> Object",id:"the-abstractsource-object",level:2},{value:"The <code>Stream</code> Abstract Base Class",id:"the-stream-abstract-base-class",level:3},{value:"HTTP Streams",id:"http-streams",level:2}],l={toc:p};function m(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"basic-concepts"},"Basic Concepts"),(0,r.kt)("h2",{id:"the-airbyte-specification"},"The Airbyte Specification"),(0,r.kt)("p",null,"As a quick recap, the Airbyte Specification requires an Airbyte Source to support 4 distinct operations:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Spec")," - The required configuration in order to interact with the underlying technical system e.g. database"),(0,r.kt)("p",{parentName:"li"},"information, authentication information etc.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Check")," - Validate that the provided configuration is valid with sufficient permissions for one to perform all"),(0,r.kt)("p",{parentName:"li"},"required operations on the Source.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Discover")," - Discover the Source's schema. This let users select what a subset of the data to sync. Useful"),(0,r.kt)("p",{parentName:"li"},"if users require only a subset of the data.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Read")," - Perform the actual syncing process. Data is read from the Source, parsed into ",(0,r.kt)("inlineCode",{parentName:"p"},"AirbyteRecordMessage"),"s"),(0,r.kt)("p",{parentName:"li"},"and sent to the Airbyte Destination. Depending on how the Source is implemented, this sync can be incremental"),(0,r.kt)("p",{parentName:"li"},"or a full-refresh."))),(0,r.kt)("p",null,"A core concept discussed here is the ",(0,r.kt)("strong",{parentName:"p"},"Source"),"."),(0,r.kt)("p",null,"The Source contains one or more ",(0,r.kt)("strong",{parentName:"p"},"Streams")," ","(","or ",(0,r.kt)("strong",{parentName:"p"},"Airbyte Streams"),")",". A ",(0,r.kt)("strong",{parentName:"p"},"Stream")," is the other concept key to understanding how Airbyte models the data syncing process. A ",(0,r.kt)("strong",{parentName:"p"},"Stream")," models the logical data groups that make up the larger ",(0,r.kt)("strong",{parentName:"p"},"Source"),". If the ",(0,r.kt)("strong",{parentName:"p"},"Source")," is a RDMS, each ",(0,r.kt)("strong",{parentName:"p"},"Stream")," is a table. In a REST API setting, each ",(0,r.kt)("strong",{parentName:"p"},"Stream")," corresponds to one resource within the API. e.g. a ",(0,r.kt)("strong",{parentName:"p"},"Stripe Source")," would have have one ",(0,r.kt)("strong",{parentName:"p"},"Stream")," for ",(0,r.kt)("inlineCode",{parentName:"p"},"Transactions"),", one for ",(0,r.kt)("inlineCode",{parentName:"p"},"Charges")," and so on."),(0,r.kt)("h2",{id:"the-source-class"},"The ",(0,r.kt)("inlineCode",{parentName:"h2"},"Source")," class"),(0,r.kt)("p",null,"Airbyte provides abstract base classes which make it much easier to perform certain categories of tasks e.g: ",(0,r.kt)("inlineCode",{parentName:"p"},"HttpStream")," makes it easy to create HTTP API-based streams. However, if those do not satisfy your use case ","(","for example, if you're pulling data from a relational database",")",", you can always directly implement the Airbyte Protocol by subclassing the CDK's ",(0,r.kt)("inlineCode",{parentName:"p"},"Source")," class."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Source")," class implements the ",(0,r.kt)("inlineCode",{parentName:"p"},"Spec")," operation by looking for a file named ",(0,r.kt)("inlineCode",{parentName:"p"},"spec.yaml")," (or ",(0,r.kt)("inlineCode",{parentName:"p"},"spec.json"),") in the module's root by default. This is expected to be a json schema file that specifies the required configuration. Here is an ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/airbytehq/airbyte/blob/master/airbyte-integrations/connectors/source-exchange-rates/source_exchange_rates/spec.yaml"},"example")," from the Exchange Rates source."),(0,r.kt)("p",null,"Note that while this is the most flexible way to implement a source connector, it is also the most toilsome as you will be required to manually manage state, input validation, correctly conforming to the Airbyte Protocol message formats, and more. We recommend using a subclass of ",(0,r.kt)("inlineCode",{parentName:"p"},"Source")," unless you cannot fulfill your use case otherwise."),(0,r.kt)("h2",{id:"the-abstractsource-object"},"The ",(0,r.kt)("inlineCode",{parentName:"h2"},"AbstractSource")," Object"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"AbstractSource")," is a more opinionated implementation of ",(0,r.kt)("inlineCode",{parentName:"p"},"Source"),". It implements ",(0,r.kt)("inlineCode",{parentName:"p"},"Source"),"'s 4 methods as follows:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Check")," delegates to the ",(0,r.kt)("inlineCode",{parentName:"p"},"AbstractSource"),"'s ",(0,r.kt)("inlineCode",{parentName:"p"},"check_connection")," function. The function's ",(0,r.kt)("inlineCode",{parentName:"p"},"config")," parameter contains the user-provided configuration, specified in the ",(0,r.kt)("inlineCode",{parentName:"p"},"spec.yaml")," returned by ",(0,r.kt)("inlineCode",{parentName:"p"},"Spec"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"check_connection")," uses this configuration to validate access and permissioning. Here is an ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/airbytehq/airbyte/blob/master/airbyte-integrations/connectors/source-exchange-rates/source_exchange_rates/source.py#L90"},"example")," from the same Exchange Rates API."),(0,r.kt)("h3",{id:"the-stream-abstract-base-class"},"The ",(0,r.kt)("inlineCode",{parentName:"h3"},"Stream")," Abstract Base Class"),(0,r.kt)("p",null,"An ",(0,r.kt)("inlineCode",{parentName:"p"},"AbstractSource")," also owns a set of ",(0,r.kt)("inlineCode",{parentName:"p"},"Stream"),"s. This is populated via the ",(0,r.kt)("inlineCode",{parentName:"p"},"AbstractSource"),"'s ",(0,r.kt)("inlineCode",{parentName:"p"},"streams")," ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/airbytehq/airbyte/blob/master/airbyte-cdk/python/airbyte_cdk/sources/abstract_source.py#L63"},"function"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"Discover")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Read")," rely on this populated set."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Discover")," returns an ",(0,r.kt)("inlineCode",{parentName:"p"},"AirbyteCatalog")," representing all the distinct resources the underlying API supports. Here is the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/airbytehq/airbyte/blob/master/airbyte-cdk/python/airbyte_cdk/sources/abstract_source.py#L74"},"entrypoint")," for those interested in reading the code. See ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/airbytehq/airbyte/tree/21116cad97f744f936e503f9af5a59ed3ac59c38/docs/contributing-to-airbyte/python/concepts/schemas.md"},"schemas")," for more information on how to declare the schema of a stream."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Read")," creates an in-memory stream reading from each of the ",(0,r.kt)("inlineCode",{parentName:"p"},"AbstractSource"),"'s streams. Here is the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/airbytehq/airbyte/blob/master/airbyte-cdk/python/airbyte_cdk/sources/abstract_source.py#L90"},"entrypoint")," for those interested."),(0,r.kt)("p",null,"As the code examples show, the ",(0,r.kt)("inlineCode",{parentName:"p"},"AbstractSource")," delegates to the set of ",(0,r.kt)("inlineCode",{parentName:"p"},"Stream"),"s it owns to fulfill both ",(0,r.kt)("inlineCode",{parentName:"p"},"Discover")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Read"),". Thus, implementing ",(0,r.kt)("inlineCode",{parentName:"p"},"AbstractSource"),"'s ",(0,r.kt)("inlineCode",{parentName:"p"},"streams")," function is required when using the CDK."),(0,r.kt)("p",null,"A summary of what we've covered so far on how to use the Airbyte CDK:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A concrete implementation of the ",(0,r.kt)("inlineCode",{parentName:"li"},"AbstractSource")," object is required."),(0,r.kt)("li",{parentName:"ul"},"This involves,",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"implementing the ",(0,r.kt)("inlineCode",{parentName:"li"},"check_connection"),"function."),(0,r.kt)("li",{parentName:"ol"},"Creating the appropriate ",(0,r.kt)("inlineCode",{parentName:"li"},"Stream")," classes and returning them in the ",(0,r.kt)("inlineCode",{parentName:"li"},"streams")," function."),(0,r.kt)("li",{parentName:"ol"},"placing the above mentioned ",(0,r.kt)("inlineCode",{parentName:"li"},"spec.yaml")," file in the right place.")))),(0,r.kt)("h2",{id:"http-streams"},"HTTP Streams"),(0,r.kt)("p",null,"We've covered how the ",(0,r.kt)("inlineCode",{parentName:"p"},"AbstractSource")," works with the ",(0,r.kt)("inlineCode",{parentName:"p"},"Stream")," interface in order to fulfill the Airbyte Specification. Although developers are welcome to implement their own object, the CDK saves developers the hassle of doing so in the case of HTTP APIs with the ",(0,r.kt)("a",{parentName:"p",href:"/connector-development/cdk-python/http-streams"},(0,r.kt)("inlineCode",{parentName:"a"},"HTTPStream"))," object."))}m.isMDXComponent=!0}}]);