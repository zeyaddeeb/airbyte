"use strict";(self.webpackChunkdocu=self.webpackChunkdocu||[]).push([[5815],{76541:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var r=n(83117),a=(n(67294),n(3905));const i={},o="Understanding the YAML file",s={unversionedId:"connector-development/config-based/understanding-the-yaml-file/yaml-overview",id:"connector-development/config-based/understanding-the-yaml-file/yaml-overview",title:"Understanding the YAML file",description:"The low-code framework involves editing a boilerplate YAML file. This section deep dives into the components of the YAML file.",source:"@site/../docs/connector-development/config-based/understanding-the-yaml-file/yaml-overview.md",sourceDirName:"connector-development/config-based/understanding-the-yaml-file",slug:"/connector-development/config-based/understanding-the-yaml-file/yaml-overview",permalink:"/connector-development/config-based/understanding-the-yaml-file/yaml-overview",draft:!1,editUrl:"https://github.com/airbytehq/airbyte/blob/master/docs/../docs/connector-development/config-based/understanding-the-yaml-file/yaml-overview.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Step 6: Testing",permalink:"/connector-development/config-based/tutorial/testing"},next:{title:"Requester",permalink:"/connector-development/config-based/understanding-the-yaml-file/requester"}},l={},c=[{value:"Stream",id:"stream",level:2},{value:"Data retriever",id:"data-retriever",level:3},{value:"Configuring the cursor field for incremental syncs",id:"configuring-the-cursor-field-for-incremental-syncs",level:2},{value:"More readings",id:"more-readings",level:2}],d={toc:c};function m(e){let{components:t,...i}=e;return(0,a.kt)("wrapper",(0,r.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"understanding-the-yaml-file"},"Understanding the YAML file"),(0,a.kt)("p",null,"The low-code framework involves editing a boilerplate ",(0,a.kt)("a",{parentName:"p",href:"/connector-development/config-based/low-code-cdk-overview#configuring-the-yaml-file"},"YAML file"),". This section deep dives into the components of the YAML file."),(0,a.kt)("h2",{id:"stream"},"Stream"),(0,a.kt)("p",null,"Streams define the schema of the data to sync, as well as how to read it from the underlying API source.\nA stream generally corresponds to a resource within the API. They are analogous to tables for a relational database source."),(0,a.kt)("p",null,"A stream's schema will can defined as a ",(0,a.kt)("a",{parentName:"p",href:"https://json-schema.org/"},"JSONSchema")," file in ",(0,a.kt)("inlineCode",{parentName:"p"},"<source_connector_name>/schemas/<stream_name>.json"),".\nMore information on how to define a stream's schema can be found ",(0,a.kt)("a",{target:"_blank",href:n(48964).Z},"here")),(0,a.kt)("p",null,"The schema of a stream object is:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'  Stream:\n    type: object\n    additionalProperties: true\n    required:\n      - name\n      - retriever\n    properties:\n      "$options":\n        "$ref": "#/definitions/$options"\n      name:\n        type: string\n      primary_key:\n        "$ref": "#/definitions/PrimaryKey"\n      retriever:\n        "$ref": "#/definitions/Retriever"\n      stream_cursor_field:\n        type: string\n      transformations:\n        "$ref": "#/definitions/RecordTransformation"\n      checkpoint_interval:\n        type: integer\n')),(0,a.kt)("p",null,"More details on streams and sources can be found in the ",(0,a.kt)("a",{parentName:"p",href:"/connector-development/cdk-python/basic-concepts"},"basic concepts section"),"."),(0,a.kt)("h3",{id:"data-retriever"},"Data retriever"),(0,a.kt)("p",null,"The data retriever defines how to read the data for a Stream and acts as an orchestrator for the data retrieval flow."),(0,a.kt)("p",null,"It is described by:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"/connector-development/config-based/understanding-the-yaml-file/requester"},"Requester"),": Describes how to submit requests to the API source"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"/connector-development/config-based/understanding-the-yaml-file/pagination"},"Paginator"),": Describes how to navigate through the API's pages"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"/connector-development/config-based/understanding-the-yaml-file/record-selector"},"Record selector"),": Describes how to extract records from a HTTP response"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"/connector-development/config-based/understanding-the-yaml-file/stream-slicers"},"Stream slicer"),": Describes how to partition the stream, enabling incremental syncs and checkpointing")),(0,a.kt)("p",null,"Each of those components (and their subcomponents) are defined by an explicit interface and one or many implementations.\nThe developer can choose and configure the implementation they need depending on specifications of the integration they are building against."),(0,a.kt)("p",null,"Since the ",(0,a.kt)("inlineCode",{parentName:"p"},"Retriever")," is defined as part of the Stream configuration, different Streams for a given Source can use different ",(0,a.kt)("inlineCode",{parentName:"p"},"Retriever")," definitions if needed."),(0,a.kt)("p",null,"The schema of a retriever object is:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'  Retriever:\n    type: object\n    anyOf:\n      - "$ref": "#/definitions/SimpleRetriever"\n  SimpleRetriever:\n    type: object\n    additionalProperties: true\n    required:\n      - name\n      - requester\n      - record_selector\n    properties:\n      "$options":\n        "$ref": "#/definitions/$options"\n      name:\n        type: string\n      primary_key:\n        "$ref": "#/definitions/PrimaryKey"\n      requester:\n        "$ref": "#/definitions/Requester"\n      record_selector:\n        "$ref": "#/definitions/HttpSelector"\n      paginator:\n        "$ref": "#/definitions/Paginator"\n      stream_slicer:\n        "$ref": "#/definitions/StreamSlicer"\n  PrimaryKey:\n    type: string\n')),(0,a.kt)("h2",{id:"configuring-the-cursor-field-for-incremental-syncs"},"Configuring the cursor field for incremental syncs"),(0,a.kt)("p",null,"Incremental syncs are supported by using a ",(0,a.kt)("inlineCode",{parentName:"p"},"DatetimeStreamSlicer")," to iterate over a datetime range."),(0,a.kt)("p",null,"Given a start time, an end time, and a step function, it will partition the interval ","[start, end]"," into small windows of the size described by the step.\nNote that the ",(0,a.kt)("inlineCode",{parentName:"p"},"StreamSlicer"),"'s ",(0,a.kt)("inlineCode",{parentName:"p"},"cursor_field")," must match the ",(0,a.kt)("inlineCode",{parentName:"p"},"Stream"),"'s ",(0,a.kt)("inlineCode",{parentName:"p"},"stream_cursor_field"),"."),(0,a.kt)("p",null,"More information on ",(0,a.kt)("inlineCode",{parentName:"p"},"DatetimeStreamSlicer")," can be found in the ",(0,a.kt)("a",{parentName:"p",href:"/connector-development/config-based/understanding-the-yaml-file/stream-slicers#datetimestreamslicer"},"stream slicers")," section."),(0,a.kt)("h2",{id:"more-readings"},"More readings"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/connector-development/config-based/understanding-the-yaml-file/requester"},"Requester")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/connector-development/config-based/understanding-the-yaml-file/stream-slicers"},"Stream slicers"))))}m.isMDXComponent=!0},3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>f});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(n),f=a,u=p["".concat(l,".").concat(f)]||p[f]||m[f]||i;return n?r.createElement(u,o(o({ref:t},d),{},{components:n})):r.createElement(u,o({ref:t},d))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},48964:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/files/source_schema-b00f47c96d7b7da1535bcb0807af67a2.yaml"}}]);